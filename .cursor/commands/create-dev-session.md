# create-dev-session（フェーズ詳細タスクからdev-sessionsを作成）

## 概要

フェーズ9以降は、フェーズごとの詳細タスクを `docs/05-<フェーズ番号>-*.md` に事前に作成し、
その中から「今回のセッションでやるタスク（1〜3個）」を選んで `docs/dev-sessions/YYYY/MM/` にセッションファイルを作成し、
`docs/dev-sessions/template-session.md` を埋めるためのカスタムコマンドです。

- 対象フェーズと本セッションで取り組むタスク（1〜3個）を決める
- `docs/dev-sessions/template-session.md` をもとに新しいセッションファイルを作成
- 壁打ち結果・チェックリスト・プロンプト案をテンプレートに落とし込む

## 前提

- 事前に、対象フェーズの詳細計画が `docs/05-<フェーズ番号>-*.md` として作成されていること
  - まだない場合は `docs/phase-planning/phase-planning.md`（作成ガイド）に従い、`docs/phase-planning/template-phase-detail.md` をコピーして作成する
  - フェーズ1〜8など、詳細ファイルが無い/作らない場合は `docs/05-00-development-phases.md` の該当フェーズ節を起点に、今回のタスクを選ぶ
- dev-sessions の運用ルールは `docs/dev-sessions/README.md` に記載されている
- 日付と連番の決め方は `docs/05-00-development-phases.md` の
  「dev-sessions ファイルの日付の付け方（AI作業時の標準フロー）」に従う
- `docs/05-00-development-phases.md` は全体の索引（高レベル）であり、対象フェーズの詳細計画と進捗管理の正本は `docs/05-<フェーズ番号>-*.md` とする（テンプレを埋める際は、必要な抜粋だけを転記する）

## 実行してほしいこと

1. **今回のセッション範囲の確定**  
   - 対象フェーズの詳細計画（`docs/05-<フェーズ番号>-*.md`）の「進捗チェックリスト（正本）」と「実装計画」から、
     **「今回のセッションで着手するタスク」を1〜3個に絞る**。
   - すでに完了（`- [x]`）になっているタスクは原則選ばない（例外: 追加の検証や改善が必要な場合は、目的を明記して選ぶ）
   - 各タスクについて:
     - 対象フェーズ（例: フェーズ9）
     - タスク名
     - 完了条件
     - 実行プロンプト案（参照ファイル / やりたいこと / 制約）
     を整理する。

2. **ファイル名と日付の決定（説明）**  
   次のルールをユーザー or AIが実行する前提で、手順として明示する：
   - 現在日付の取得:
     ```bash
     date +%Y%m%d  # 例: 20251210
     ```
   - その日の既存ファイルから連番を決定:
     ```bash
     YYYYMMDD=$(date +%Y%m%d)
     YYYY=${YYYYMMDD:0:4}
     MM=${YYYYMMDD:4:2}
     ls "docs/dev-sessions/${YYYY}/${MM}/${YYYYMMDD}-"*.md | sort | tail -1
     # 既存ファイルがなければ 01、あれば最大連番+1
     ```
   - ファイル名の形式:
     - `docs/dev-sessions/YYYY/MM/YYYYMMDD-連番-説明.md`
     - 例: `docs/dev-sessions/2025/12/20251210-01-phase9-instagram-account-coverage.md`

3. **テンプレートから新規ファイルを作成**  
   - `docs/dev-sessions/template-session.md` をベースに新しいファイルを作るよう指示する。
   - 作成するセッションファイルでは、少なくとも以下を埋める：
     - **メタ情報**
       - 日付（`YYYY-MM-DD` 形式）
       - 想定所要時間
       - 対応フェーズ（例: フェーズ9）
     - **今日のゴール（最大3つ）**
       - 1〜3個のタスクを、アウトカムベースで要約
     - **コンテキスト・合意事項（AIとの議論メモ）**
       - `docs/05-<フェーズ番号>-*.md` に書かれている方針や、今回のセッションで前提とする決定事項を2〜5行程度で要約
       - フェーズ計画の全文は原則貼らない（必要に応じて付録に抜粋を置き、正本が `docs/05-<フェーズ番号>-*.md`（高レベル索引は `docs/05-00-development-phases.md`）である旨を明記）
     - **チェックリスト式実装計画書（このセッション）**
       - 「作業タスク & プロンプト設計」セクションに、今回のタスク1〜3個だけを転記（`docs/05-<フェーズ番号>-*.md` のタスク群を丸ごと貼るのではなく必要分だけ）
       - 各タスクに完了条件と実行プロンプト案を記述
     - **検証・テスト**
       - 今回のタスクで実行すべき確認方法と期待結果を記述

4. **出力フォーマット**  
   - 実際のコマンド実行はユーザー or 他のコマンドが行う前提で、
     **「どのファイルをどの名前で作り、どのセクションに何を書くべきか」**をMarkdownで具体的に指示する。  
   - 可能であれば、新規セッションファイルの「ひな形（ほぼ完成版）」をそのまま提案し、
     ユーザーが `docs/dev-sessions/YYYY/MM/` にコピー＆ペーストできる形にする。

## メモ

- このコマンドは「フェーズ詳細タスクを dev-sessions の1セッションに具体化する」ためのものです
- 1セッションに詰め込みすぎないように、**タスク数は1〜3個を目安**とし、
  残りは「次回に持ち越す候補タスク」として明示するのが望ましいです

