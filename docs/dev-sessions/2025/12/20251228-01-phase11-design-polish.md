# チェックリスト式実装計画書: 2025-12-28

> **セッションとは**: このプロジェクトにおける「セッションの定義」は `docs/dev-sessions/session-definition.md` を参照。
>
> **重要（AI作業時）**: このセッションファイルは `date` コマンドで現在日付（`20251228`）を取得したうえで作成している。

## セッション概要とゴール

### 概要

- 一言サマリ: フェーズ11のデザイン/UX（UI一貫性・レスポンシブ・A11y）を実データ前提で仕上げる
- 対応フェーズ: フェーズ11
- セッション種別: デザイン修正 / UX仕上げ / A11y改善
- 実行方式: ペア
- 影響範囲: `apps/web/app/` / `apps/web/components/` / `apps/web/app/globals.css` / `apps/web/tailwind.config.ts`
- 日付: 2025-12-28
- 想定所要時間: 60〜240 分（上限なし）

### ゴール

- **ゴール1**: 「デザイン修正」範囲のチェック項目をすべて満たし、必要な修正を反映できる（フェーズ11: `05-00` 272-290）
  - 完了条件:
    - [ ] 代表ページ（トップ / 拠点一覧 / 詳細 / お気に入り）で UIデザインの一貫性を確認し、必要な修正が反映されている
      - [ ] カラーリング（テーマカラー・アクセントカラー）が統一されている
      - [ ] タイポグラフィ（フォントサイズ・行間・太さ）が階層的に整理されている
      - [ ] 余白（コンポーネント間・セクション間）が適切に設定されている
      - [ ] ボタン・リンク・入力要素のスタイルが一貫している
      - [ ] 空状態（データなし）・エラー状態・ローディング状態の表示が適切に実装されている
      - [ ] デザインリファレンス（チームみらい系プロダクト）のトーン & マナーに沿っている（根拠/スクショ/メモを本セッションに記録）
    - [ ] レスポンシブレイアウトのチェック項目を満たす（必要な修正が反映されている）
      - [ ] スマートフォン（幅375px / 390px / 428px）で致命的な崩れや操作しづらさがない
      - [ ] タブレット（幅768px / 1024px）でレイアウトが適切に調整されている
      - [ ] PC（幅1280px / 1920px）で最大幅制限や中央配置が適切に設定されている
      - [ ] 横スクロールが発生していない（意図的なテーブル横スクロールを除く）
    - [ ] アクセシビリティ（A11y）のチェック項目を満たす（必要な修正が反映されている）
      - [ ] キーボード操作のみで主要フロー（拠点一覧表示→お気に入り追加→スケジュール表示）が操作可能
      - [ ] フォーカスインジケータが視認可能で、フォーカス順序が論理的
      - [ ] エラーメッセージ・ローディング状態に `aria-live` 属性が適切に設定されている
      - [ ] 画像・アイコンに代替テキストまたは `aria-label` が設定されている（装飾的要素は `aria-hidden="true"`）
      - [ ] コントラスト比が4.5:1以上（Lighthouse / axe-core で検証。自動化できるなら自動検証）

### 関連ドキュメント

- 参照:
  - `docs/05-00-development-phases.md`（フェーズ11）
  - `docs/02-design.md`（画面構成・UI）
  - `docs/04-development.md`（5.4 アクセシビリティ・品質 / 5.2 pnpmスクリプト）
  - デザインリファレンス: `docs/05-00-development-phases.md` の「デザインリファレンス（チームみらい系プロダクト）」

## 前提・合意事項（事前議論・壁打ちメモ）

- 今日のセッションで前提とする方針:
  - 目標は「見た目の美しさ」だけでなく、可読性/操作性/A11y を落とさずにUXを上げる
  - デザインの根拠（どこをどう変えたか・なぜ）を dev-sessions に残す（スクショが必要なら保存先パスのみ記録）
  - シークレットや個人情報をセッションログに書かない
- 議論概要:
  - フェーズ11の完了条件（272-290）を「デザイン修正」セッションとして独立して実施する
- 保留中の論点 / 今回は触らないと決めたこと:
  - E2E再確認・運用手順の整合性確認（291-298）は別セッションで対応する

---

## 実装チェックリスト（本セッションにおける）

### 1. 作業タスク & 実行内容（実装・ドキュメント更新）

- [ ] タスク1: UIデザインの一貫性を確認し、必要な修正を反映する（トップ/拠点一覧/詳細/お気に入り）
  - 完了条件: 4ページで「色/タイポ/余白/ボタン等/空状態・エラー・ローディング」が揃い、デザインリファレンスに沿う
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - docs/05-00-development-phases.md（フェーズ11 272-279）
      - apps/web/app/page.tsx
      - apps/web/app/facilities/[id]/page.tsx
      - apps/web/components/*（EmptyState, ErrorAlert, LoadingSpinner, LoadingSkeleton, HeroSection 等）
      - apps/web/app/globals.css
      - apps/web/tailwind.config.ts
    - やりたいこと:
      - 既存UIの色/タイポ/余白のバラつきを洗い出し、共通化できるところを揃える（Tailwindクラスの整理）
      - 空状態/エラー/ローディングの見た目・文言・余白を統一（既存コンポーネントを優先して再利用）
      - デザインリファレンスのトーン（余白・白ベース・アクセント色絞り）に合わせて微調整
    - 制約・注意点:
      - 機能挙動は変えない（UI/UXの改善が目的）
      - コントラスト・フォーカス可視性を犠牲にしない
      - 既存テストがある範囲は維持（変更が必要なら理由を本セッションに記録）
    ```

- [ ] タスク2: レスポンシブレイアウトを確認し、必要な修正を反映する（375/390/428, 768/1024, 1280/1920）
  - 完了条件: 指定幅で致命的な崩れがなく、意図しない横スクロールが無い
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - docs/05-00-development-phases.md（フェーズ11 280-284）
      - apps/web/app/* / apps/web/components/*
      - apps/web/app/globals.css
    - やりたいこと:
      - 主要ページを各幅で確認し、崩れている箇所（表・カード・ヘッダー等）を修正する
      - 横スクロールが発生している場合は原因（固定幅/overflow/余白）を特定して解消する
      - テーブルの横スクロールは「意図的な場合のみ」許容し、必要ならUIで分かるようにする
    - 制約・注意点:
      - レスポンシブ対応は「見た目」だけでなくタップターゲット/可読性も考慮する
    ```

- [ ] タスク3: A11yを確認し、必要な修正を反映する（キーボード/フォーカス/aria/代替テキスト/コントラスト）
  - 完了条件: A11yのチェック項目が満たされ、検証結果を本セッションに記録している
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - docs/05-00-development-phases.md（フェーズ11 285-290）
      - apps/web/app/layout.tsx / apps/web/app/page.tsx
      - apps/web/components/*（ボタン/リンク/状態表示系）
    - やりたいこと:
      - キーボード操作で代表フローを通し、フォーカス順序とフォーカス可視性を確認・修正する
      - エラー/ローディング表示の `aria-live`、画像/アイコンの `alt`/`aria-label` を点検する
      - Lighthouse / axe-core でコントラスト等を確認し、必要なら配色を調整する
    - 制約・注意点:
      - 装飾アイコンは `aria-hidden="true"` を基本にする
      - 検証ツールの結果を貼る場合は、機密情報が含まれないよう注意する
    ```

### 2. 検証・テスト（確認方法）

- [ ] 確認1: 主要ページを各幅で手動確認（375/390/428, 768/1024, 1280/1920）
      - 期待結果: 致命的な崩れや操作しづらさが無い（横スクロールは意図した箇所以外で発生しない）
- [ ] 確認2: キーボードのみで代表フローを操作
      - 期待結果: フォーカスが見える/順序が論理的/操作が完遂できる
- [ ] 確認3: Lighthouse / axe-core でA11y観点（特にコントラスト）を確認
      - 期待結果: 重大な指摘が無い（または指摘があれば修正し再確認できる）
- [ ] 確認4（任意）: web の lint / typecheck / test を実行
      - 期待結果: `mise exec -- pnpm --filter web lint` / `typecheck` / `test` が通る

---

## 実施ログ

- スタート:
- メモ:
  - TODO: 主要ページURL（ローカル/プレビュー）と確認したビューポートの記録
  - TODO: 変更方針と（必要なら）スクショ保存先の記録

## 結果とふりかえり

- 完了できたタスク:
  - [ ] （セッション終了時に更新）
- 未完了タスク / 想定外だったこと:
  - [ ] （セッション終了時に更新）
- 学び・次回改善したいこと:
  - 

## 次回に持ち越すタスク

- [ ] フェーズ11（それ以外）: E2Eテスト再確認と運用手順の整合性確認（`docs/05-00-development-phases.md` 291-298）
  - 今回やらない理由: セッションを「デザイン修正」と分割して集中するため
  - 次回着手条件: `docs/dev-sessions/2025/12/20251228-02-phase11-e2e-and-ops-alignment.md` を開始する

***

## 付録（任意）

- 抜粋（正本）: `docs/05-00-development-phases.md` フェーズ11（272-290）


