# チェックリスト式実装計画書: 2025-12-28

> **セッションとは**: このプロジェクトにおける「セッションの定義」は `docs/dev-sessions/session-definition.md` を参照。
>
> **重要（AI作業時）**: このセッションファイルは `date` コマンドで現在日付（`20251228`）を取得したうえで作成している。

## セッション概要とゴール

### 概要

- 一言サマリ: 年内MVPリリースに向けて、ベータ表記の追加・スケジュールは運用者の手動投入に寄せる方針確定・OSS公開前チェック（Cursor）を行う
- 対応フェーズ: フェーズ11（デザイン / UX 仕上げ & リリース準備）
- セッション種別: リリース準備（最小実装 / 運用整備 / OSS公開前チェック）
- 実行方式: ペア（まずは議論・計画中心。実装はこのセッション計画を起点に後続で実施）
- 影響範囲: `apps/web`（UIのベータ表記） / `docs`（運用・公開前チェック）/ リポジトリ全体（OSSチェック）
- 日付: 2025-12-28
- 想定所要時間: 25〜60 分

### ゴール

> **チェックの付け方（完了条件）**:
> - 完了条件は **Markdownのチェックリスト**（`- [ ]`）で記述する（セッション開始時点では未チェック）
> - セッションの最後に、満たした完了条件を `- [x]` に更新する（ゴール達成のセルフチェック）
> - ✅（絵文字）のチェックは使わない（`- [ ]` / `- [x]` に統一）

- **ゴール**: 「年内MVPで出す」ための残作業を 3 タスクに絞り、実装・運用・公開前チェックの着手順と完了条件が明確になっている
  - 完了条件:
    - [ ] 「一般ユーザーにスケジュール登録をお願いするUI」「ログイン」「DB直接投稿（一般ユーザー）」は **MVPスコープ外** と明記できている
    - [ ] 「運用者が手動で `schedules` に投入する」手順の参照先が決まり、実施チェックリストが用意できている（= 迷わず作業できる）
    - [ ] OSS公開前チェック（secret/log/license/README）で見る観点がチェックリスト化され、次アクション（修正が必要な箇所）が列挙できている
  - 補足:
    - CodeRabbit は今回は使わず、Cursor（Agent/検索/レビュー）で完結させる

### 関連ドキュメント

- 参照:
  - `docs/05-00-development-phases.md`（フェーズ11の位置づけ、リリース準備）
  - `docs/04-development.md` 9.6（手動での `schedules` 登録手順）
  - `apps/web/components/HeroSection.tsx`（トップの見出し・キャッチコピー）
  - `README.md` / `docs/README.md`（公開時の入口ドキュメント）

## 前提・合意事項（事前議論・壁打ちメモ）

- 今日のセッションで前提とする方針:
  - 年内MVPを最優先し、**消耗する論点（一般ユーザー投稿・ログイン・自動登録精度向上）はやらない**
  - スケジュールは **運用者（自分）で手動投入**する（Runbookは `docs/04-development.md` 9.6 に既に存在）
  - 「ベータ版」表記で、未整備/未登録が起こり得ることをユーザーに自然に伝える
  - OSS公開前チェックは Cursor のみで実施する（CodeRabbitは見送り）
- 議論概要:
  - 「登録してください」のユーザー想定（一般/施設/運用者）が曖昧で実装/運用コストが膨らむため、MVPでは採用しない
  - ログインを入れない前提のため、DB直接投稿（一般ユーザー投稿）はやめる
  - MVP成功条件は (b) 「自分が使う範囲の施設だけスケジュールが入っている」を採用し、運用でカバーする
- 保留中の論点 / 今回は触らないと決めたこと:
  - 一般ユーザー/施設向けの投稿・登録フロー（スパム対策/認可/監査ログが必要になるため）
  - ログイン導入（ID連携、RLS設計変更、UX設計が必要）
  - スケジュール自動取得の精度向上（DW扱い。年内MVPでは追わない）

---

## 実装チェックリスト（本セッションにおける）

### 1. 作業タスク & 実行内容（実装・ドキュメント更新）

- [ ] タスク1: 「ベータ版」表記をUIに追加する（最小・目立つ・邪魔しない）
  - 完了条件: トップ（ヒーロー/ヘッダー相当）で「ベータ版」が視認でき、文言が過剰に不安を煽らない
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - apps/web/components/HeroSection.tsx
      - apps/web/app/page.tsx（HeroSectionの位置）
    - やりたいこと:
      - タイトル付近に小さめのバッジ（例: "ベータ版"）を追加する
      - 可能なら補足1行（例: 「一部の拠点はスケジュール未登録の場合があります」）を検討
    - 制約・注意点:
      - デザインは最小。今は「出す」優先で整える
      - アクセシビリティ（読み上げ・コントラスト）を崩さない
    ```

- [ ] タスク2: スケジュール登録は「運用者の手動投入」で回す（MVP運用チェックリストを用意）
  - 完了条件: 自分が使う施設について、当月スケジュールが「手動で投入できる」状態で、迷わず手順を踏める
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - docs/04-development.md（9.6.2 手動入力フロー / 9.6.2-3 schedules登録）
    - やりたいこと:
      - 「自分が使う施設リスト（TODO）」を作り、当月（YYYY-MM-01）の schedules が入っているかを確認する
      - 未登録なら、Runbookどおりに Supabase Studio で INSERT/UPDATE する
      - 入力ルール（published_monthは月初、status=published、image_urlはダミー可）を再確認する
    - 制約・注意点:
      - 公開UIからの投稿/登録は実装しない（ログイン無しのため）
      - DB操作はシークレット/本番影響があるため、必要ならAIは手順提示までに留め、実行は人が行う
    ```

- [ ] タスク3: OSS公開前チェック（Cursorのみ）を実施し、直すべき点を列挙する
  - 完了条件: 「公開して問題ない/要修正」が判断でき、要修正は具体的なファイル・理由が列挙されている
  - **AIが実行する内容（手順/プロンプト/操作メモ）**:
    ```
    - 参照ファイル:
      - README.md / docs/README.md / docs/04-development.md / apps/web/env.local.example
      - リポジトリ全体（grep）
    - やりたいこと:
      - secretsチェック: .env/.env.local などがコミットされていないか、キー/トークンのハードコードが無いか（ログ出力含む）
      - 公開ドキュメント: セットアップ手順が最小で通るか、秘密情報が含まれないか
      - ライセンス: LICENSEファイルの有無を確認し、無い場合は「採用するライセンス案（MIT等）」を決めて追加する
      - 依存/規約: スクレイピングやInstagram利用に関する注意（既存Runbookの範囲で）をREADMEに最小反映するか検討
    - 制約・注意点:
      - 機密情報は絶対に出力・貼り付けしない
      - 追加で外部サービスのキー作成/課金が必要な作業は、このセッションでは行わない
    ```

### 2. 検証・テスト（確認方法）

- [ ] 確認1: UIの「ベータ版」表記が意図した場所に表示され、レイアウトが崩れていない
      - 期待結果: トップページで視認でき、スマホ/PCの主要幅で違和感がない
- [ ] 確認2: 手動投入したスケジュールが「お気に入り拠点」で表示される
      - 期待結果: 該当施設をお気に入り追加→当月のInstagram埋め込みが表示される（失敗時もフォールバック表示が出る）
- [ ] 確認3: OSS公開チェックの結果、直すべき項目がチェックリスト化されている
      - 期待結果: 要修正がある場合、ファイルパス/理由/対応案が列挙されている

---

## 実施ログ

- スタート: TODO
- メモ:
  - 今日の方針: 一般ユーザー投稿/ログインはやらない。スケジュールは運用者の手動投入でMVP達成。

## 結果とふりかえり

> **チェックの付け方**: 完了したタスクは `- [x]` で列挙する。未完了のタスクは `- [ ]` のまま「次回に持ち越すタスク」へ移す。

- 完了できたタスク:
  - [ ] タスク1: 「ベータ版」表記をUIに追加する
  - [ ] タスク2: スケジュール登録は「運用者の手動投入」で回す（MVP運用チェックリストを用意）
  - [ ] タスク3: OSS公開前チェック（Cursorのみ）を実施し、直すべき点を列挙する
- 未完了タスク / 想定外だったこと:
  - TODO
- 学び・次回改善したいこと:
  - TODO

## 次回に持ち越すタスク

> **運用（重要）**:
> - 持ち越しタスクの**正本は常に「最新のセッションファイル 1つ」に集約**する（= 次回は最新だけ見れば良い状態にする）
> - 次のセッションを作ったら、前回セッションの未完了タスクを **新しい（最新）セッション** のこのセクションへコピーする
> - 前回セッション側のこのセクションは、後日 **各行を `- [x] （持ち越し済み → ...）` に更新して凍結**する（ここに追記して増やさない）
> - 後日「漏れていたタスク」に気づいた場合は、**最新セッションにのみ追記**し、行末に `（漏れていたため追加: YYYY-MM-DD）` を付ける

- [ ] LICENSEの採用と追加（OSSとして公開するなら必須）
  - 今回やらない理由: ライセンスの選定が必要（MIT/Apache-2.0等）。まず方針を決める必要がある
  - 次回着手条件: 採用ライセンスの意思決定ができている（TODO: どれにするか）
- [ ] 施設詳細ページのスケジュール表示を、現状（準備中）からMVP相当に更新
  - 今回やらない理由: MVPの最短動線は「お気に入り」側で成立しているため、後回しにしてもリリース可能
  - 次回着手条件: 詳細ページを主要導線に含めたい/未登録時の案内を改善したい
- [ ] 公開後のフィードバック導線（Issue/フォーム等）の整備
  - 今回やらない理由: 年内は公開優先で、導線設計は簡略化する
  - 次回着手条件: 公開先と受け口（GitHub Issuesなど）を決める

***

## 付録（任意）

> メモ: フェーズ計画の正本は `docs/05-00-development-phases.md`（索引）と、該当するフェーズ詳細（存在する場合）です。ここには必要な抜粋だけを貼る。


